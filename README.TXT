########################################################################################################################

pip install django
pip install django-allauth
pip install django-apscheduler
pip install django-filter

########################################################################################################################

ЗАДАНИЕ 6.7.1

# ----------------------------------------------------------------------------------------------------------------------

Добавьте подписки на рассылки о новых материалах в категориях:

	страница должна быть доступна по адресу https://127.0.0.1:8000/subscriptions/; +
	\D6\NewsPortal\Subscriptions\urls.py

	должна быть создана модель Subscriber для хранения подписок пользователей; +
	\D6\NewsPortal\Subscriptions\models.py

	при публикации новости все подписчики должны получить сообщение на почту со ссылкой на страницу для прочтения
	новости (используйте для этого сигнал post_save). +
	\D6\NewsPortal\Posts\signals.py

# ----------------------------------------------------------------------------------------------------------------------

Реализуйте отправку списка статей на почту подписчиков категорий каждую неделю на основе той же модели Subscriber:

	подключите приложение django_apscheduler; +
	\D6\NewsPortal\Engine\settings.py

	добавьте команду запуска периодических задач; +
	python manage.py ATsender

	настройте периодическую задачу отправки списка статей каждую пятницу в 18:00; +
	\D6\NewsPortal\Posts\management\commands\ATsender.py

	составьте сообщение со ссылками на статьи; +
	\D6\NewsPortal\Posts\management\commands\ATsender.py = line 58 / "00 18 * * 5"

	сообщение должно содержать только статьи, которые появились с момента предыдущей рассылки. +
	\D6\NewsPortal\Posts\management\commands\ATsender.py
	only_article = Post.objects.filter(article_or_news__istartswith="AT").dates("datetime", "week").values()[:3]
	Получается отправляем в пятницу и в понедельник начинаем собирать                         ↑↑

########################################################################################################################

КРИТЕРИИ ОЦЕНИВАНИЯ

# ----------------------------------------------------------------------------------------------------------------------
# Задача 1
# ----------------------------------------------------------------------------------------------------------------------

View по пути /subscriptions/ зарегистрировано в urls и позволяет подписываться и отписываться от рассылок. +

# ----------------------------------------------------------------------------------------------------------------------

Создана модель Subscriber с ForeignKey на пользователя и категорию. +

# ----------------------------------------------------------------------------------------------------------------------

При срабатывании сигнала post_save выполняется функция рассылки новости на почтовые адреса подписчиков. +

# ----------------------------------------------------------------------------------------------------------------------

Сообщение имеет ссылку на новость. +

# ----------------------------------------------------------------------------------------------------------------------

Сигналы импортированы в модуле apps.py, в методе ready, класса конфигурации приложения. +

########################################################################################################################

КРИТЕРИИ ОЦЕНИВАНИЯ

# ----------------------------------------------------------------------------------------------------------------------
# Задача 2
# ----------------------------------------------------------------------------------------------------------------------

Подключено приложение django_apscheduler. +

# ----------------------------------------------------------------------------------------------------------------------

Добавлена команда запуска периодических задач. +

# ----------------------------------------------------------------------------------------------------------------------

Создана периодическая задача отправки списка статей. +

# ----------------------------------------------------------------------------------------------------------------------

Сообщения отправляются только подписчикам. +

# ----------------------------------------------------------------------------------------------------------------------

Статьи отправляются подписчикам каждую пятницу в 18:00. +

# ----------------------------------------------------------------------------------------------------------------------

Сообщение со статьями имеет ссылки для перехода к ним. +

# ----------------------------------------------------------------------------------------------------------------------

Сообщение содержит только статьи, которые появились с момента предыдущей рассылки. +

########################################################################################################################